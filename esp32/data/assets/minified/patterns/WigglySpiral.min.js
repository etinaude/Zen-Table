class WigglySpiral{constructor(){this.key="wigglyspiral",this.name="Wiggly Spiral",this.config={offset:{name:"Offset",value:null,input:{type:"createSlider",params:[2,40,20,1],class:"slider",displayValue:!0}},amplitude:{name:"Amplitude",value:null,input:{type:"createSlider",params:[1,10,5,.1],class:"slider",displayValue:!0}},wiggles:{name:"Wiggles/Rev",value:null,input:{type:"createSlider",params:[0,40,20,.1],class:"slider",displayValue:!0}}},this.path=[]}draw(){this.config.offset.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(1) > input").value),this.config.amplitude.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(2) > input").value),this.config.wiggles.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(3) > input").value),document.querySelector("#pattern-controls > div.pattern-control:nth-child(1) > span").innerHTML=this.config.offset.value+" "+units,document.querySelector("#pattern-controls > div.pattern-control:nth-child(2) > span").innerHTML=this.config.amplitude.value.toFixed(1)+" "+units,document.querySelector("#pattern-controls > div.pattern-control:nth-child(3) > span").innerHTML=this.config.wiggles.value;let path=this.calc(0,0,max_y/2*.9,0,this.config.offset.value,this.config.amplitude.value,this.config.wiggles.value);return this.path=path,path}calc(start_x,start_y,start_r,start_theta,distance_between_turns,wiggle_amplitude,wiggle_frequency){for(var x,y,r=start_r,theta=start_theta,max_r=Math.min(max_x/2,max_y/2),path=new Array,step=0,theta_per_step=1/300;r>0;)theta=step*(1/300)*(2*Math.PI),r=start_r-distance_between_turns*(step*(1/300)),x=start_x+(r-=wiggle_amplitude*Math.sin(wiggle_frequency*theta))*Math.cos(theta),y=start_y+r*Math.sin(theta),path.push([x,y]),step++;return path}}