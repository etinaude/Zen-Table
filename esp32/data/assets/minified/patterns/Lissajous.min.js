class Lissajous{constructor(){this.key="lissajous",this.name="Lissajous Curve",this.path_sampling_optimization=2;let max_r=Math.min(max_x-min_x,max_y-min_y)/2;this.config={A:{name:"X Amplitude",value:null,input:{type:"createSlider",params:[0,(max_x-min_x)/2,(max_x-min_x)/2,1],class:"slider",displayValue:!0}},a1:{name:"X Frequency (a)",value:null,input:{type:"createSlider",params:[1,100,8,1],class:"slider",displayValue:!0}},B:{name:"Y Amplitude",value:null,input:{type:"createSlider",params:[0,(max_y-min_y)/2,(max_y-min_y)/2,1],class:"slider",displayValue:!0}},b1:{name:"Y Frequency (b)",value:null,input:{type:"createSlider",params:[1,100,9,1],class:"slider",displayValue:!0}},phase:{name:"Phase Offset",value:null,input:{type:"createSlider",params:[-Math.PI,Math.PI,0,Math.PI/32],class:"slider",displayValue:!0}},rotation:{name:"Rotation",value:null,input:{type:"createSlider",params:[-180,180,0,1],class:"slider",displayValue:!0}}},this.path=[]}draw(){this.config.A.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(1) > input").value),this.config.a1.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(2) > input").value),this.config.B.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(3) > input").value),this.config.b1.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(4) > input").value),this.config.phase.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(5) > input").value),this.config.rotation.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(6) > input").value),document.querySelector("#pattern-controls > div.pattern-control:nth-child(1) > span").innerHTML=this.config.A.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(2) > span").innerHTML=this.config.a1.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(3) > span").innerHTML=this.config.B.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(4) > span").innerHTML=this.config.b1.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(5) > span").innerHTML=Math.round(parseFloat(this.config.phase.value)*(180/Math.PI),2)+"°",document.querySelector("#pattern-controls > div.pattern-control:nth-child(6) > span").innerHTML=this.config.rotation.value+"°";let path=this.calc(this.config.A.value,this.config.a1.value,this.config.B.value,this.config.b1.value,this.config.phase.value,this.config.rotation.value);return this.path=path,path}calc(A,a1,B,b1,phase,rotation){var x,y,theta=0,path=new Array,step=0;let lissajous_period=2*Math.PI/this.greatest_common_divisor(a1,b1),steps_per_revolution=5e3;for(;theta<lissajous_period;)theta=step/5e3*lissajous_period,x=A*Math.cos(a1*theta+phase),y=B*Math.cos(b1*theta),path.push([x,y]),step++;return 0!=rotation&&(path=path.map((function(element){return this.rotationMatrix(element[0],element[1],rotation*(Math.PI/180))}),this)),path}greatest_common_divisor(a,b){return 0==b?a:this.greatest_common_divisor(b,a%b)}rotationMatrix(x,y,theta){return[x*Math.cos(theta)-y*Math.sin(theta),x*Math.sin(theta)+y*Math.cos(theta)]}}