class Diameters{constructor(){this.key="diameters",this.name="Diameters",this.config={spokes:{name:"Spokes",value:null,input:{type:"createSlider",params:[2,60,12,2],class:"slider",displayValue:!0}},waves:{name:"Waves",value:null,input:{type:"createSlider",params:[1,30,4,1],class:"slider",displayValue:!0}},amplitude:{name:"Amplitude",value:null,input:{type:"createSlider",params:[0,60,20,1],class:"slider",displayValue:!0}}},this.path=[]}draw(){this.config.spokes.value=document.querySelector("#pattern-controls > div:nth-child(1) > input").value,this.config.waves.value=document.querySelector("#pattern-controls > div:nth-child(2) > input").value,this.config.amplitude.value=document.querySelector("#pattern-controls > div:nth-child(3) > input").value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(1) > span").innerHTML=this.config.spokes.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(2) > span").innerHTML=this.config.waves.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(3) > span").innerHTML=this.config.amplitude.value;let path=this.calc(parseInt(this.config.spokes.value),parseInt(this.config.waves.value),parseInt(this.config.amplitude.value));return this.path=path,path}calc(num_spokes,num_waves,wave_amplitude){for(var x,y,theta=0,max_r=Math.min(max_x/2,max_y/2),path=new Array,step=0,theta_per_step=2*Math.PI/num_spokes,sub_steps=20*num_waves,direction=1;theta<2*Math.PI;){theta=step*theta_per_step;for(var j=0;j<=sub_steps;j++)x=direction*(Math.min(max_x,max_y)/2)*((j-sub_steps/2)/(sub_steps/2)),y=wave_amplitude*sin(j/sub_steps*num_waves*(2*Math.PI)),path.push(this.rotationMatrix(x,y,theta));step++,direction*=-1}return path}rotationMatrix(x,y,theta){return[x*cos(theta)-y*sin(theta),x*sin(theta)+y*cos(theta)]}}