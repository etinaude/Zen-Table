class Gravity{constructor(){this.key="gravity",this.name="Gravity",this.config={steps:{name:"Iteration Steps",value:null,input:{type:"createSlider",params:[1e3,1e4,2e3,100],class:"slider",displayValue:!0}},A1m:{name:"Attractor Mass",value:null,input:{type:"createSlider",params:[.1,100,50,1e-4],class:"slider",displayValue:!0}},xp0:{name:"X0 Position",value:null,input:{type:"createSlider",params:[-(max_x-min_x)/2,(max_x-min_x)/2,0,1],class:"slider",displayValue:!0}},yp0:{name:"Y0 Position",value:null,input:{type:"createSlider",params:[-(max_y-min_y)/2,(max_y-min_y)/2,0,.1],class:"slider",displayValue:!0}},xv0:{name:"X0 Velocity",value:null,input:{type:"createSlider",params:[-20,20,5,.01],class:"slider",displayValue:!0}},yv0:{name:"Y0 Velocity",value:null,input:{type:"createSlider",params:[-20,20,5,.01],class:"slider",displayValue:!0}}},this.path=[],this.movers,this.attractors=[]}draw(){let path;return(this.config.steps.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(1) > input").value),this.config.A1m.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(2) > input").value),this.config.xp0.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(3) > input").value),this.config.yp0.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(4) > input").value),this.config.xv0.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(5) > input").value),this.config.yv0.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(6) > input").value),document.querySelector("#pattern-controls > div.pattern-control:nth-child(1) > span").innerHTML=this.config.steps.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(2) > span").innerHTML=this.config.A1m.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(3) > span").innerHTML=this.config.xp0.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(4) > span").innerHTML=this.config.yp0.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(5) > span").innerHTML=this.config.xv0.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(6) > span").innerHTML=this.config.yv0.value,this.mover=new Mover(10,this.config.xp0.value,this.config.yp0.value,this.config.xv0.value,this.config.yv0.value),this.attractors[0]=new Attractor(1,this.config.A1m.value,-100,0),this.attractors[1]=new Attractor(1,this.config.A1m.value,100,0),this.calc(this.config.steps.value))}calc(steps){let path=new Array,point=new Array,force=new p5.Vector(0,0),force1,force2;for(var i=0;i<steps;i++)force1=this.attractors[0].calculateAttraction(this.mover,5,20),force2=this.attractors[1].calculateAttraction(this.mover,5,20),force=p5.Vector.add(force1,force2),this.mover.applyForce(force),this.mover.update(),point=[this.mover.position.x,this.mover.position.y],point[0]>-(max_x-min_x)/2&&point[0]<(max_x-min_x)/2&&point[1]>-(max_y-min_y)/2&&point[1]<(max_y-min_y)/2&&path.push(point);return path}}class Attractor{constructor(G,m,x,y){this.position=new p5.Vector(x,y),this.mass=m,this.G=G}calculateAttraction(mover,min_distance=5,max_distance=20){let force=p5.Vector.sub(this.position,mover.position),distance=force.mag();distance=constrain(distance,min_distance,max_distance),force.normalize();let strength=this.G*this.mass*mover.mass/(distance*distance);return force.mult(strength),force}}class Mover{constructor(m,x,y,vx,vy){this.mass=m,this.position=new p5.Vector(x,y),this.velocity=new p5.Vector(vx,vy),this.acceleration=new p5.Vector(0,0)}applyForce(force){let acceleration=p5.Vector.div(force,this.mass);this.acceleration.add(acceleration)}update(){this.velocity.add(this.acceleration),this.position.add(this.velocity),this.acceleration.mult(0)}}