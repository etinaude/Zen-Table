class Spokes{constructor(){this.key="spokes",this.name="Spokes",this.config={spokes:{name:"Spokes",value:null,input:{type:"createSlider",params:[1,120,60,1],class:"slider",displayValue:!0}},waves:{name:"Waves",value:null,input:{type:"createSlider",params:[.5,10,4,.5],class:"slider",displayValue:!0}},amplitude:{name:"Amplitude",value:null,input:{type:"createSlider",params:[0,60,10,1],class:"slider",displayValue:!0}},reverse:{name:"Reverse",value:null,input:{type:"createCheckbox",attributes:[{type:"checkbox",checked:null}],params:[0,1,0],displayValue:!1}}},this.path=[]}draw(){this.config.spokes.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(1) > input").value),this.config.waves.value=parseFloat(document.querySelector("#pattern-controls > div:nth-child(2) > input").value),this.config.amplitude.value=parseInt(document.querySelector("#pattern-controls > div:nth-child(3) > input").value),document.querySelector("#pattern-controls > div.pattern-control:nth-child(1) > span").innerHTML=this.config.spokes.value,document.querySelector("#pattern-controls > div.pattern-control:nth-child(2) > span").innerHTML=this.config.waves.value.toFixed(1),document.querySelector("#pattern-controls > div.pattern-control:nth-child(3) > span").innerHTML=this.config.amplitude.value;let path=this.calc(this.config.spokes.value,this.config.waves.value,this.config.amplitude.value);return this.path=path,path}calc(num_spokes,num_waves,wave_amplitude){for(var x,y,theta=0,max_r=Math.min(max_x/2,max_y/2),path=new Array,step=0,theta_per_step=2*Math.PI/num_spokes,sub_steps=20*num_waves,direction=1;theta<2*Math.PI;){theta=step*theta_per_step;for(var j=0;j<=sub_steps;j++)x=direction>0?direction*(Math.min(max_x,max_y)/2)*(j/sub_steps):-direction*(Math.min(max_x,max_y)/2)*((sub_steps-j)/sub_steps),y=direction*wave_amplitude*sin(j/sub_steps*num_waves*(2*Math.PI)),path.push(this.rotationMatrix(x,y,theta));step++,direction*=-1}return path}rotationMatrix(x,y,theta){return[x*Math.cos(theta)-y*Math.sin(theta),x*Math.sin(theta)+y*Math.cos(theta)]}}